@{
    Layout = Context.Request.Headers["HX-Request"] == "true" ? null : "_Layout";
    var isCollapsed = Context.Request.Cookies["Collapsed"] ?? "true";
}

<div class="container">
    <div class="row">
        <div class="page-header @((isCollapsed == "true") ? "collapsed" : "")">
            <div class="header-main">
                <div class="header-content">
                    <h1><i class="fas fa-building"></i> Şirket Düzeni</h1>
                    <p>Şirket düzenini görüntüleyin ve yönetin.</p>
                </div>
            </div>

            <div class="header-toggle-wrapper">
                <button class="btn-toggle-header" hx-on:click="toggleHeaderCollapse(event)" title="Küçült/Genişlet">
                    <i class="fas fa-chevron-up"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="row mt-3 mb-5">
        <div class="col-12 d-flex justify-content-center">
            @await Component.InvokeAsync("OrganizationTree")
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card p-4 card-before card-hover">
                <div class="card-body">
                    <div class="row stat-card-header">
                        <div class="col col-md-9">
                            <div class="card-text stat-card-value">@await Component.InvokeAsync("DepartmentsCount")</div>
                        </div>
                        <div class="col col-md-3">
                            <div class="card-icon">
                                <i class="fa-solid fa-building"></i>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="card-title stat-card-title-small">Toplam Departman</div>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card p-4 card-before card-hover">
                <div class="card-body">
                    <div class="row stat-card-header">
                        <div class="col col-md-9">
                            <div class="card-text stat-card-value">@await Component.InvokeAsync("SectionsCount")</div>
                        </div>
                        <div class="col col-md-3">
                            <div class="card-icon">
                                <i class="fa-solid fa-puzzle-piece"></i>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="card-title stat-card-title-small">Toplam Bölüm</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card p-4 card-before card-hover">
                <div class="card-body">
                    <div class="row stat-card-header">
                        <div class="col col-md-9">
                            <div class="card-text stat-card-value">@await Component.InvokeAsync("UsersCount")</div>
                        </div>
                        <div class="col col-md-3">
                            <div class="card-icon">
                                <i class="fa-solid fa-user-tie"></i>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="card-title stat-card-title-small">Toplam Admin</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row gy-3">
        <div class="col-md-4">
            <a class="company-btn" href="/Company/AddDepartment" hx-get="/Company/AddDepartment" hx-on:click="window.isSidebarClick=true;" hx-target="#content" hx-push-url="true">
                <div class="company-card">
                    <div class="company-card-icon"><i class="fa-solid fa-building"></i></div>
                    <h4 class="company-card-title">Departman Oluştur</h4>
                    <p class="company-card-desc">Şirketinizdeki departmanları oluşturun, düzenleyin ve yönetin</p>
                </div>
            </a>
        </div>
        <div class="col-md-4">
            <a class="company-btn" href="/Company/AddSection" hx-get="/Company/AddSection" hx-on:click="window.isSidebarClick=true;" hx-target="#content" hx-push-url="true">
                <div class="company-card">
                    <div class="company-card-icon"><i class="fas fa-sitemap"></i></div>
                    <h3 class="company-card-title">Bölüm Oluştur</h3>
                    <p class="company-card-desc">Departmanlar altında bölümler oluşturun ve organize edin</p>
                </div>
            </a>
        </div>
        <div class="col-md-4">
            <a class="company-btn" href="/Company/AddUser" hx-get="/Company/AddUser" hx-on:click="window.isSidebarClick=true;" hx-target="#content" hx-push-url="true">
                <div class="company-card">
                    <div class="company-card-icon"><i class="fa-solid fa-user-tie"></i></div>
                    <h3 class="company-card-title">Kullanıcı oluştur</h3>
                    <p class="company-card-desc">Kullanıcıları oluşturun, bilgilerini güncelleyin ve takip edin</p>
                </div>
            </a>
        </div>
    </div>
</div>
